"0","# First we coalesce in the two onsets, so we can intermix in the persp_orienting and moves. Then make sure the rows are arranged correctly, then we want to create a column which keeps note of which moves are actually one move (what we split earlier). Lastly, we add Action_Number (ignoring one_move for now)"
"0","data <- data %>%"
"0","  mutate(Construct_Action_onset = coalesce(Construct_Action_onset, Perspective_Orienting_onset),"
"0","         Construct_Action_offset = coalesce(Construct_Action_offset, Perspective_Orienting_offset)) %>%"
"0","  select(-Perspective_Orienting_onset, -Perspective_Orienting_offset) %>%"
"0","  group_by(ID_id, Task_model_type) %>%"
"0","  arrange(ID_id, Task_model_type, Construct_Action_onset) %>%"
"0","  mutate(Action_Number = ifelse("
"0","    !is.na(Construct_Action_action_cd) & Construct_Action_action_cd != """","
"0","    cumsum(!is.na(Construct_Action_action_cd) & Construct_Action_action_cd != """"),"
"0","    NA"
"0","  )) %>%"
"0","  fill(Action_Number, .direction = ""down"") %>%"
"0","  ungroup() %>%"
"0","  group_by(Construct_Action_offset, Task_model_type, ID_id) %>%"
"0","  mutate(Perspective_Orienting_direction_lr = ifelse("
"0","    any(Perspective_Orienting_direction_lr == "".""),"
"0","    ""."","
"0","    Perspective_Orienting_direction_lr"
"0","  )) %>%"
"0","  ungroup()"
